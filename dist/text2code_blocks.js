"use strict";var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==(void 0===e?"undefined":_typeof(e))&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=20)}([function(e,t,n){function r(e,t,n){var r=e&&e.getInput(t),o=n&&n.outputConnection;r&&o&&r.connection.connect(o)}function o(e){Blockly.Xml.clearWorkspaceAndLoadFromXml(Blockly.Xml.workspaceToDom(e),e),Blockly.svgResize(e)}function i(e,t){e.nextConnection&&t.previousConnection&&e.nextConnection.connect(t.previousConnection)}function s(e,t){var n=e.newBlock(t);return n.initSvg(),n}function a(e,t){e&&t&&t.moveBy(e.getRelativeToSurfaceXY().x-t.getRelativeToSurfaceXY().x,e.getRelativeToSurfaceXY().y-t.getRelativeToSurfaceXY().y)}function l(e,t,n){var r=e.workspace,o=t;e.type.toLowerCase().startsWith("variables_")&&"VAR"===n&&(o=-1===r.getAllVariableNames().indexOf(t)?r.createVariable(t).getId():r.getVariable(t).getId()),e.setFieldValue(o,n)}function c(e){if(!e)return null;for(var t=e.getParent();t&&!t.previousConnection;)t=t.getParent();return t}function u(e,t,n){var r=e.getParent(),o=null,i=null,s=-1;return e.inputList.forEach((function(e){e.fieldRow.forEach((function(e){t.getField(e.name)&&t.setFieldValue(e.getValue(),e.name)}))})),r?(s=(i=(o=r.getInputWithBlock(e))?o.connection:r.nextConnection).targetConnection.type)===Blockly.OUTPUT_VALUE?i.connect(t.outputConnection):s===Blockly.PREVIOUS_STATEMENT&&i.connect(t.previousConnection):t.moveBy(e.getRelativeToSurfaceXY().x-t.getRelativeToSurfaceXY().x,e.getRelativeToSurfaceXY().y-t.getRelativeToSurfaceXY().y),e.getChildren().slice().forEach((function(n){if(e.getNextBlock()!==n){var r=e.getInputWithBlock(n),o=t.getInput(r.name);o&&(r=o.connection.connect(n.outputConnection))}else t.nextConnection.connect(e.getNextBlock().previousConnection)})),n&&e.dispose(),t}n.d(t,"h",(function(){return r})),n.d(t,"d",(function(){return o})),n.d(t,"g",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return a})),n.d(t,"f",(function(){return l})),n.d(t,"a",(function(){return c})),n.d(t,"e",(function(){return u}))},function(e,t,n){t.a=function(){function e(t,n){_classCallCheck(this,e),this.lhs_=t,this.rhs_=n}return _createClass(e,[{key:"lhs",get:function(){return this.lhs_}},{key:"rhs",get:function(){return this.rhs_}}]),e}()},function(e,t,n){function r(e,t,n){return e instanceof Array&&t instanceof Array?e.reduce((function(e,r){return e.concat(t.map((function(e){return n?r.concat(e):[r,e]})))}),[]):[]}function o(e){return 0===e.length?[]:1===e.length?e[0].map((function(e){return[e]})):e.reduce((function(e,t,n){return r(e,t,n>1)}))}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}))},function(e,t,n){n(4);var r=n(0);t.a=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=t.workspace,i=function e(t,n){var o;if(t&&t.type)return o=Object(r.c)(n,t.type),t.inputs&&Object.keys(t.inputs).forEach((function(i){Object(r.h)(o,i,e(t.inputs[i],n))})),t&&t.fields&&Object.keys(t.fields).forEach((function(e){Object(r.f)(o,t.fields[e],e)})),o;if(t&&Array.isArray(t.blocks)){for(var i=t.blocks.map((function(t){return e(t,n)})),s=0;s<i.length-1;s++)i[s].getNextBlock()||i[s+1].getPreviousBlock()||Object(r.g)(i[s],i[s+1]);return i[0]}}(e,o);return Object(r.e)(t,i,!0),n&&Object(r.d)(o),i}},function(e,t,n){var r=function(){function e(t){_classCallCheck(this,e),this.blockTemplate_=JSON.parse(t),this.args_=[],this.blockVal_=null}return _createClass(e,[{key:"evaluate_",value:function(t){var n=this;if(t instanceof e)return t;if("string"==typeof t){var r=t.split(/(%\d+)/).map((function(e){var t=e.startsWith("%")&&parseInt(e.substring(1));return t?n.evaluate_(n.args_[t-1]):e}));return r.find((function(t){return t instanceof e}))||r.join("")}if(Array.isArray(t))return t.map(this.evaluate_.bind(this));var o={};return Object.keys(t).forEach((function(e){o[e]=n.evaluate_(t[e])})),o}},{key:"hasBeenSet_",value:function(e){return!/"%(\d+)"/.test(e)}},{key:"keys",value:function(e){var t=this;return this.blockVal_[e].filter((function(e){return t.hasBeenSet_(e)}))}},{key:"args",set:function(e){this.args_=e,this.blockVal_=this.evaluate_(this.blockTemplate_)}},{key:"type",get:function(){return this.blockVal_&&this.blockVal_.type}},{key:"inputs",get:function(){return this.blockVal_&&this.blockVal_.inputs}},{key:"fields",get:function(){return this.blockVal_&&this.blockVal_.fields}},{key:"blocks",get:function(){return this.blockVal_&&this.blockVal_.blocks}}]),e}();t.a=r},function(e,t,n){n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));var r=JSON.parse('{"rules":{"wholeNumberExp":{"wholeNumberSum":["wholeNumberExp","wholeNumberAddMinusOp","wholeNumberTerm"],"wholeNumberTermSingle":["wholeNumberTerm"]},"wholeNumberTerm":{"wholeNumberTermSingleGroupedExp":["openParenthesis","wholeNumberTerm","closeParenthesis"],"wholeNumberTermTwoGroupedExp":["openParenthesis","wholeNumberExp","wholeNumberGroupedOp","wholeNumberTerm","closeParenthesis"],"wholeNumberTermProduct":["wholeNumberTerm","wholeNumberTimesDividedByOp","wholeNumberTerm"],"wholeNumberTermAtomic":["wholeNumberAtomic"]},"wholeNumberAtomic":{"wholeNumberLiteral":"token_","identifierGet":["identifier"],"wholeNumberStringFunc":["stringExpWholeNumber"]},"wholeNumberGroupedOp":{"wholeNumberSumTwo":["wholeNumberAddMinusOp"],"wholeNumberProductTwo":["wholeNumberTimesDividedByOp"]},"wholeNumberAddMinusOp":{"wholeNumberPlus":"+","wholeNumberMinus":"-"},"wholeNumberTimesDividedByOp":{"wholeNumberTimes":"*","wholeNumberDividedBy":"/"},"expression":{"expressionText":["stringExp"],"expressionNumber":["wholeNumberExp"]},"statement":{"statementSingle":["expression"],"statementVariable":["variableStatement"],"statementPrint":["stringDisplay"],"statementSemicolon":["statement","semicolon"],"statementBlockExp":["expression","statementSeparator","statement"],"statementBlockVariable":["variableStatement","statementSeparator","statement"],"statementBlockPrint":["stringDisplay","statementSeparator","statement"]},"statementSeparator":{"semicolonEnd":["semicolon"],"newLineEnd":["newLine"],"carriageReturnEnd":["carriageReturn"],"semicolonMultiSeparator":["semicolon","statementSeparator"],"newLineMultiSeparator":["newLine","statementSeparator"],"carriageReturnMultiSeparator":["carriageReturn","statementSeparator"]},"semicolon":"token_","newLine":"\\n","carriageReturn":"\\r","stringExp":{"identifierGet":["identifier"],"stringGetInputExp":["stringGetInput","openParenthesis","stringExp","closeParenthesis"],"js_stringGetInputExp":["stringPrompt","openParenthesis","stringExp","closeParenthesis"],"stringGroupedExp":["openParenthesis","stringExp","closeParenthesis"],"stringConcatenationFullExpression":["stringExp","plusStr","stringExp"],"stringCharAtFullExpression":["stringExp","dot","getCharacterNumber","openParenthesis","wholeNumberExp","closeParenthesis"],"py_stringCharAtFullExpression":["stringExp","openBracket","wholeNumberExp","closeBracket"],"js_stringCharAtFullExpression":["stringExp","dot","getCharacterNumberJS","openParenthesis","wholeNumberExp","closeParenthesis"],"stringAfterTextFullExpression":["stringExp","dot","getAfterText","openParenthesis","stringExp","closeParenthesis"],"stringBeforeTextFullExpression":["stringExp","dot","getBeforeText","openParenthesis","stringExp","closeParenthesis"],"stringSubstringFullExpression":["stringExp","dot","getTextFrom","openParenthesis","wholeNumberExp","closeParenthesis","dot","getTextTo","openParenthesis","wholeNumberExp","stringSubstringCloseParenthesisOptionalTail"],"py_stringSubstringFullExpression":["stringExp","openBracket","wholeNumberExp","colon","wholeNumberExp","closeBracket"],"js_stringSubstringFullExpression":["stringExp","dot","getSubstringJS","openParenthesis","wholeNumberExp","comma","wholeNumberExp","closeParenthesis"],"stringLiteral":"token_","funcStringGetInputExp":["stringGetInput"],"funcJS_stringGetInputExp":["stringPrompt"],"func_stringCharAtFullExpression":["stringExp","dot","getCharacterNumber"],"funcJS_stringCharAtFullExpression":["stringExp","dot","getCharacterNumberJS"],"funcStringSubstringFullExpression":["stringExp","dot","getTextFrom"],"funcBStringSubstringFullExpression":["stringExp","dot","getTextFrom","openParenthesis","wholeNumberExp","closeParenthesis"],"funcJS_stringSubstringFullExpression":["stringExp","dot","getSubstringJS"]},"stringExpWholeNumber":{"stringFindFirstFullExpression":["stringExp","dot","findFirstOccurrenceOfText","openParenthesis","stringExp","stringFindFirstCloseParenthesisOptionalTail"],"js_stringFindFirstFullExpression":["stringExp","dot","jsIndexOf","openParenthesis","stringExp","closeParenthesis"],"stringExpLength":["stringExp","dot","length"],"py_stringExpLength":["len","openParenthesis","stringExp","closeParenthesis"],"funcStringFindFirstFullExpression":["stringExp","dot","findFirstOccurrenceOfText"],"funcJS_StringFindFirstFullExpression":["stringExp","dot","jsIndexOf"]},"stringDisplay":{"js_ConsoleLogStatement":["console","dot","log","openParenthesis","expression","closeParenthesis"],"displayStatement":["display","openParenthesis","expression","closeParenthesis"],"funcJS_ConsoleLogStatement":["console","dot","log"],"funcDisplayStatement":["display"]},"stringSubstringCloseParenthesisOptionalTail":{"stringSubstringCloseParenthesisNoTail":["closeParenthesis"],"stringSubstringCloseParenthesisTail":["closeParenthesis","dot","substringTail"]},"stringFindFirstCloseParenthesisOptionalTail":{"stringFindFirstCloseParenthesisNoTail":["closeParenthesis"],"stringFindFirstCloseParenthesisTail":["closeParenthesis","dot","findFirstTail"]},"dot":"token_","console":"console","log":"log","display":"display","openParenthesis":"token_","closeParenthesis":"token_","openBracket":"token_","closeBracket":"token_","comma":"token_","stringGetInput":"getInputByAsking","stringPrompt":"prompt","length":"length","len":"len","getTextFrom":"getTextFromPositionNUMBER","getTextTo":"toPositionNUMBER","getSubstringJS":"substring","jsIndexOf":"indexOf","findFirstOccurrenceOfText":"positionNumberOfTEXT","findLastOccurrenceOfText":"lastPositionNumberOfTEXT","getAfterText":"getAfterTEXT","getBeforeText":"getBeforeTEXT","plusStr":"+","getCharacterNumber":"getCharacterNUMBER","getCharacterNumberJS":"charAt","toNumber":"toNumber","substringTail":"tak_paen","findFirstTail":"ke_sthiti_sankhya","variableStatement":{"variableAssignment":["variablesLet","identifier","equalsSign","expression"],"variableAssignmentNoLet":["identifier","equalsSign","expression"]},"variablesLet":"let","equalsSign":"=","identifier":"token_"},"terminals":["wholeNumberPlus","wholeNumberMinus","wholeNumberTimes","wholeNumberDividedBy","semicolon","newLine","carriageReturn","findFirstOccurrenceOfText","jsIndexOf","findLastOccurrenceOfText","getAfterText","getBeforeText","plusStr","getCharacterNumber","getCharacterNumberJS","toNumber","getTextFrom","getSubstringJS","getTextTo","stringGetInput","stringPrompt","console","log","display","length","substringTail","findFirstTail","variablesLet","equalsSign"]}'),o=JSON.parse('{"stringLiteral":{"pattern":"\\"([^\\"]*)\\"|\'([^\']*)\'","order":1},"identifier":{"pattern":"([_\\\\$A-Za-z|ऄ-ह|ऽ|ॐ|क़-ॡ|ॱ-ॿ][\\\\w\\\\$|ऀ-ॣ|०-९|ॱ-ॿ]*)","order":2},"positiveDecimal":{"pattern":"(\\\\d+\\\\.[1-9]\\\\d+)","order":3},"wholeNumberLiteral":{"pattern":"\\\\d+|\\\\d*\\\\.[0]+","order":6},"dot":{"pattern":"(\\\\.)","order":7},"openParenthesis":{"pattern":"(\\\\()","order":8},"closeParenthesis":{"pattern":"(\\\\))","order":9},"openBracket":{"pattern":"(\\\\[)","order":10},"closeBracket":{"pattern":"(\\\\])","order":11},"comma":{"pattern":"(\\\\,)","order":12},"semicolon":{"pattern":"(\\\\;)","order":13},"colon":{"pattern":"(:)","order":14},"negativeDecimalMOVEDFROMFOURFORNOW":{"pattern":"(-\\\\d+\\\\.[1-9]\\\\d+)","order":15},"negativeIntegerMOVEDFROMFIVEFORNOW":{"pattern":"-[1-9]\\\\d*|-[1-9]\\\\d*\\\\.[0]+","order":16}}')},function(e,t,n){n.d(t,"a",(function(){return r}));var r=JSON.parse('{"wholeNumberLiteral":{"type":"math_number","fields":{"NUM":"%1"}},"wholeNumberSum":{"type":"math_arithmetic_basic","fields":{"OP":"%2"},"inputs":{"A":"%1","B":"%3"}},"wholeNumberTermTwoGroupedExp":{"type":"math_arithmetic_basic","fields":{"OP":"%3"},"inputs":{"A":"%2","B":"%4"}},"wholeNumberTermProduct":{"type":"math_arithmetic_basic","fields":{"OP":"%2"},"inputs":{"A":"%1","B":"%3"}},"wholeNumberPlus":"ADD","wholeNumberMinus":"MINUS","wholeNumberTimes":"MULTIPLY","wholeNumberDividedBy":"DIVIDE","wholeNumberTermSingleGroupedExp":"%2","statementBlockExp":{"blocks":["%1","%3"]},"statementBlockVariable":{"blocks":["%1","%3"]},"statementBlockPrint":{"blocks":["%1","%3"]},"stringLiteral":{"type":"text","fields":{"TEXT":"%1"}},"stringGetInputExp":{"type":"text_input","inputs":{"TEXT":"%3"}},"js_stringGetInputExp":{"type":"js_text_input","inputs":{"TEXT":"%3"}},"displayStatement":{"type":"text_print","inputs":{"TEXT":"%3"}},"js_ConsoleLogStatement":{"type":"js_text_print","inputs":{"TEXT":"%5"}},"stringExpLength":{"type":"t2c_text_length","inputs":{"VALUE":"%1"}},"py_stringExpLength":{"type":"t2c_text_length","inputs":{"VALUE":"%3"}},"stringFindFirstFullExpression":{"type":"%3","inputs":{"VALUE":"%1","FIND":"%5"}},"js_stringFindFirstFullExpression":{"type":"%3","inputs":{"VALUE":"%1","FIND":"%5"}},"stringSubstringFullExpression":{"type":"%3","inputs":{"STRING":"%1","AT1":"%5","AT2":"%10"}},"stringCharAtFullExpression":{"type":"%3","inputs":{"VALUE":"%1","AT":"%5"}},"py_stringCharAtFullExpression":{"type":"t2c_text_charat","inputs":{"VALUE":"%1","AT":"%3"}},"js_stringCharAtFullExpression":{"type":"%3","inputs":{"VALUE":"%1","AT":"%5"}},"py_stringSubstringFullExpression":{"type":"t2c_text_getsubstring","inputs":{"STRING":"%1","AT1":"%3","AT2":"%5"}},"js_stringSubstringFullExpression":{"type":"%3","inputs":{"STRING":"%1","AT1":"%5","AT2":"%7"}},"stringAfterTextFullExpression":{"type":"%3","inputs":{"TEXT":"%1","SUB":"%5"}},"stringBeforeTextFullExpression":{"type":"%3","inputs":{"TEXT":"%1","SUB":"%5"}},"stringConcatenationFullExpression":{"type":"%2","inputs":{"A":"%1","B":"%3"}},"stringGroupedExp":"%2","plusStr":"t2c_text_join","findFirstOccurrenceOfText":"t2c_text_indexof","getCharacterNumber":"t2c_text_charat","getCharacterNumberJS":"js_text_charat","getSubstringJS":"js_text_getsubstring","jsIndexOf":"js_text_indexof","getTextFrom":"t2c_text_getsubstring","getAfterText":"t2c_text_after","getBeforeText":"t2c_text_before","funcStringGetInputExp":{"type":"text_input","inputs":{"TEXT":{"type":"code_expression"}}},"funcJS_stringGetInputExp":{"type":"js_text_input","inputs":{"TEXT":{"type":"code_expression"}}},"func_stringCharAtFullExpression":{"type":"%3","inputs":{"VALUE":"%1","AT":{"type":"code_expression"}}},"funcJS_stringCharAtFullExpression":{"type":"%3","inputs":{"VALUE":"%1","AT":{"type":"code_expression"}}},"funcStringSubstringFullExpression":{"type":"%3","inputs":{"STRING":"%1","AT1":{"type":"code_expression"},"AT2":{"type":"code_expression"}}},"funcBStringSubstringFullExpression":{"type":"%3","inputs":{"STRING":"%1","AT1":"%5","AT2":{"type":"code_expression"}}},"funcJS_stringSubstringFullExpression":{"type":"%3","inputs":{"STRING":"%1","AT1":{"type":"code_expression"},"AT2":{"type":"code_expression"}}},"funcStringFindFirstFullExpression":{"type":"%3","inputs":{"VALUE":"%1","FIND":{"type":"code_expression"}}},"funcJS_stringFindFirstFullExpression":{"type":"%3","inputs":{"VALUE":"%1","FIND":{"type":"code_expression"}}},"funcDisplayStatement":{"type":"text_print","inputs":{"TEXT":{"type":"code_expression"}}},"funcJS_ConsoleLogStatement":{"type":"js_text_print","inputs":{"TEXT":{"type":"code_expression"}}},"identifierGet":{"type":"variables_get","fields":{"VAR":"%1"}},"variableAssignment":{"type":"variables_set","fields":{"VAR":"%2"},"inputs":{"VALUE":"%4"}},"variableAssignmentNoLet":{"type":"variables_set","fields":{"VAR":"%1"},"inputs":{"VALUE":"%3"}}}')},function(e,t,n){n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}));var r=n(0);function o(e){var t=e.workspace;"js_text_print"===e.type||"js_text_input"===e.type?Object(r.e)(e,Object(r.c)(t,e.type.substring(3)),!0):"js_text_indexof"===e.type||"js_text_charat"===e.type||"js_text_getsubstring"===e.type?Object(r.e)(e,Object(r.c)(t,e.type.replace("js","t2c")),!0):"text_length"===e.type&&Object(r.e)(e,Object(r.c)(t,"t2c_"+e.type),!0)}function i(e){var t=e.workspace;if("text_print"===e.type)Object(r.e)(e,Object(r.c)(t,"js_text_print"),!0);else if("text_input"===e.type)Object(r.e)(e,Object(r.c)(t,"js_text_input"),!0);else if("t2c_text_indexof"===e.type)Object(r.e)(e,Object(r.c)(t,"js_text_indexof"),!0);else if("t2c_text_charat"===e.type)Object(r.e)(e,Object(r.c)(t,"js_text_charat"),!0);else if("t2c_text_length"===e.type)Object(r.e)(e,Object(r.c)(t,"text_length"),!0);else if("t2c_text_getsubstring"===e.type)Object(r.e)(e,Object(r.c)(t,"js_text_getsubstring"),!0);else if("t2c_text_before"===e.type){var n=e.getInputTargetBlock("SUB"),o=e.getInputTargetBlock("TEXT"),i=null,s=Object(r.c)(t,"js_text_getsubstring"),a=Object(r.c)(t,"math_number"),l=Object(r.c)(t,"js_text_indexof");if(Object(r.f)(a,0,"NUM"),o)if("text"===o.type)i=Object(r.c)(t,o.type),Object(r.f)(i,o.getFieldValue("TEXT"),"TEXT"),l.getInput("VALUE").connection.connect(i.outputConnection),s.getInput("STRING").connection.connect(o.outputConnection);else if("variables_get"===o.type)i=Object(r.c)(t,o.type),Object(r.f)(i,o.getFieldValue("VAR"),"VAR"),l.getInput("VALUE").connection.connect(i.outputConnection),s.getInput("STRING").connection.connect(o.outputConnection);else{var c=createNewTempVariable(t),u=Object(r.c)(t,"variables_set");Object(r.f)(u,c,"VAR"),Object(r.h)(u,"VALUE",o);var _=Object(r.c)(t,"variables_get");Object(r.f)(_,c,"VAR");var p=copyBlock(_);if(Object(r.h)(l,"VALUE",p),Object(r.h)(s,"STRING",_),f=Object(r.a)(e)){var g=f.previousConnection.targetBlock();g&&u.previousConnection.connect(g.nextConnection),f.previousConnection.connect(u.nextConnection)}}n&&Object(r.h)(l,"FIND",n),Object(r.h)(s,"AT1",a),Object(r.h)(s,"AT2",l),e.outputConnection.targetConnection?e.outputConnection.targetConnection.connect(s.outputConnection):Object(r.b)(e,s),e.dispose()}else if("t2c_text_after"===e.type){e.getParent(),s=Object(r.c)(t,"js_text_getsubstring"),o=e.getInputTargetBlock("TEXT"),n=e.getInputTargetBlock("SUB"),l=Object(r.c)(t,"js_text_indexof");var d=Object(r.c)(t,"text_length"),h=Object(r.c)(t,"text_length"),T=Object(r.c)(t,"math_arithmetic_basic");if(Object(r.f)(T,"ADD","OP"),o){if("text"!==o.type&&"variables_get"!==o.type){var f,m=Object(r.c)(t,"variables_set");if(c=createNewTempVariable(t),Object(r.f)(m,c,"VAR"),Object(r.h)(m,"VALUE",o),f=Object(r.a)(e)){var E=f.previousConnection.targetBlock();E&&m.previousConnection.connect(E.nextConnection),f.previousConnection.connect(m.nextConnection)}o=Object(r.c)(t,"variables_get"),Object(r.f)(o,c,"VAR"),Object(r.h)(s,"STRING",o)}else Object(r.h)(s,"STRING",o);Object(r.h)(l,"VALUE",copyBlock(o)),Object(r.h)(d,"VALUE",copyBlock(o))}if(n){if("text"!==n.type&&"variables_get"!==n.type){var y=Object(r.c)(t,"variables_set"),b=createNewTempVariable(t);Object(r.f)(y,b,"VAR"),Object(r.h)(y,"VALUE",n);var x=Object(r.a)(e);if(x){var k=x.previousConnection.targetBlock();k&&y.previousConnection.connect(k.nextConnection),x.previousConnection.connect(y.nextConnection)}n=Object(r.c)(t,"variables_get"),Object(r.f)(n,b,"VAR")}if("variables_get"===n.type)Object(r.h)(T,"B",h),Object(r.h)(h,"VALUE",copyBlock(n));else{var v=Object(r.c)(t,"math_number");Object(r.f)(v,n.getFieldValue("TEXT").length,"NUM"),Object(r.h)(T,"B",v),h.dispose()}Object(r.h)(l,"FIND",n)}else Object(r.h)(T,"B",h);Object(r.h)(T,"A",l),Object(r.h)(s,"AT1",T),Object(r.h)(s,"AT2",d),e.outputConnection.targetConnection?e.outputConnection.targetConnection.connect(s.outputConnection):Object(r.b)(e,s),e.dispose()}}},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"parseAndConvertToBlocks",(function(){return parseAndConvertToBlocks}));var _grammar_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5),_tokenizer_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9),_parser_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(12),_parse_tree_block_connector_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(10),_block_interpretations_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(6),_block_evaluator_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(11),_block_generator_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(3),_block_converters_javascript_text_exact_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(7),_block_utility_functions_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(0),parseAndConvertToBlocks=function(e,t){if(document.querySelectorAll(".blocklyHtmlTextAreaInput").forEach((function(e){console.warn(e.left)})),e.editing&&(this.getFieldValue("EXP").endsWith("\r")||this.getFieldValue("EXP").endsWith("\n"))){console.warn("Attempting to parse",this.getFieldValue("EXP"));var n=T2C.MSG&&T2C.MSG.currentLanguage===T2C.MSG.PY?this.getFieldValue("EXP").replace(/[\r\n]+/g,";"):this.getFieldValue("EXP"),r=shared.parser.parseBottomUpCYK(n,shared.parseTreeBlockConnector)[0];if(r){e.editing=!1;var o=shared.evaluator.evaluate(r);console.log("Parse Tree:",r),console.log("Evaluation: ",o,this);var i=Object(_block_generator_js__WEBPACK_IMPORTED_MODULE_6__.a)(o,this,!1);console.log(i);var s=shared.workspace.getAllBlocks().find((function(e){return"code_expression"===e.type||"code_statement"===e.type}));if(s)Object(_block_utility_functions_js__WEBPACK_IMPORTED_MODULE_8__.d)(shared.workspace),(s=shared.workspace.getAllBlocks().find((function(e){return"code_expression"===e.type||"code_statement"===e.type}))).getField("EXP").showEditor_();else{console.warn("Replacing block",i);for(var a=i;!a.nextConnection&&a.getParent();)a=a.getParent();for(;a.getNextBlock();)a=a.getNextBlock();var l=Object(_block_utility_functions_js__WEBPACK_IMPORTED_MODULE_8__.c)(shared.workspace,"code_statement");a.nextConnection&&Object(_block_utility_functions_js__WEBPACK_IMPORTED_MODULE_8__.g)(a,l),Object(_block_utility_functions_js__WEBPACK_IMPORTED_MODULE_8__.d)(shared.workspace),(l=shared.workspace.getAllBlocks().find((function(e){return"code_expression"===e.type||"code_statement"===e.type}))).getField("EXP").showEditor_()}}}if(e.editing&&t.type!==Blockly.Events.CHANGE){e.editing=!1,console.log("Parsing",this.getFieldValue("EXP"));var c=T2C.MSG&&T2C.MSG.currentLanguage===T2C.MSG.PY?this.getFieldValue("EXP").replace(/[\r\n]+/g,";"):this.getFieldValue("EXP"),u=shared.parser.parseBottomUpCYK(c,shared.parseTreeBlockConnector)[0];if(u){var _=shared.evaluator.evaluate(u);console.log("Parse Tree:",u),console.log("Evaluation: ",_,this),console.log(Object(_block_generator_js__WEBPACK_IMPORTED_MODULE_6__.a)(_,this,shared.workspace))}else alert("There seems to be a problem with the code you entered.  Check that your spelling is correct, that you use lowercase and capital letters as required, that every open parenthesis ( has a matching closed one ), that you use quotation marks as needed, and other potential issues with syntax.")}},shared=function(){Blockly.FieldTextInput.prototype.showEditor_=function(e,t){this.workspace_=this.sourceBlock_.workspace;var n=t||!1;this.showInlineEditor_(n)};var init=function(){window.addEventListener("DOMContentLoaded",(function(e){if(!document.getElementById("blockly-div").getAttribute("hasWorkspace")){document.getElementById("blockly-div").setAttribute("hasWorkspace",!0),shared.toolbox=document.getElementById("toolbox");var t=Blockly.utils.userAgent.MOBILE||Blockly.utils.userAgent.ANDROID||Blockly.utils.userAgent.IPAD,n={toolbox:toolbox,collapse:!1,comments:!1,disable:!1,maxBlocks:1/0,trashcan:!0,horizontalLayout:t||window.innerHeight>window.innerWidth,toolboxPosition:"start",css:!0,media:"https://blockly-demo.appspot.com/static/media/",rtl:!1,scrollbars:!0,sounds:!0,oneBasedIndex:!0,zoom:{controls:!0}};shared.workspace=Blockly.inject("blockly-div",n);var r=function(){updateToolbox(document.getElementById("language").value),Blockly.Msg.VARIABLES_SET=T2C.MSG.currentLanguage===T2C.MSG.PY?"%1 = %2":"let %1 = %2;",updateWords(),updateTexts(),Object(_block_utility_functions_js__WEBPACK_IMPORTED_MODULE_8__.d)(shared.workspace||Blockly.getMainWorkspace()),document.getElementById("outputAppearsBelow").innerText=T2C.MSG.currentLanguage.HEADING_OUTPUT_APPEARS_BELOW,document.getElementById("bottomText")&&(document.getElementById("bottomText").innerText=T2C.MSG.currentLanguage.HEADING_BOTTOM_TEXT)};if(window.location&&"string"==typeof window.location.href){var o=window.location.href.indexOf("lang=")+5,i=window.location.href.substring(o,o+2);4!==o&&(document.getElementById("language").value=i,r())}window.addEventListener("resize",(function(){document.getElementById("top-header").style.height=Math.max(.1*window.innerHeight,50)+"px",document.getElementById("all-content").style.height=Math.min(.9*window.innerHeight,window.innerHeight-50)+"px",Blockly.svgResize(shared.workspace)})),document.getElementById("language").addEventListener("change",(function(){r();var e=shared.workspace||Blockly.getMainWorkspace();e.getAllBlocks().forEach(_block_converters_javascript_text_exact_js__WEBPACK_IMPORTED_MODULE_7__.a),Object(_block_utility_functions_js__WEBPACK_IMPORTED_MODULE_8__.d)(e)})),document.getElementById("convertToJSText2CodeButton").addEventListener("click",(function(){document.getElementById("consoleDisplay")&&(document.getElementById("consoleDisplay").textContent=""),document.getElementById("textCodeBox").value=runCode(),document.getElementById("xmlData").value=generateXML()})),document.getElementById("run-code-button")&&(document.getElementById("run-code-button").addEventListener("click",(function(){document.getElementById("output-container").classList.remove("hide-container"),document.getElementById("output-container").classList.add("show-container"),document.getElementById("consoleDisplay")&&(document.getElementById("consoleDisplay").textContent=""),T2C.MSG.currentLanguage===T2C.MSG.PY&&(T2C.MSG.currentLanguage=T2C.MSG.JS),document.getElementById("textCodeBox").value=runCode(),T2C.MSG.currentLanguage=T2C.MSG[document.getElementById("language").value.toUpperCase()],document.getElementById("xmlData").value=generateXML()})),document.getElementById("save-code-button").addEventListener("click",(function(){document.getElementById("text-code-container").classList.remove("hide-container"),document.getElementById("text-code-container").classList.add("show-container"),document.getElementById("textCodeBox").value=generateCode(),document.getElementById("xmlData").value=generateXML(),document.getElementById("load-save-text-code").textContent=T2C.MSG.currentLanguage.BUTTON_SAVE_TEXT_CODE,document.getElementById("load-save-xml").textContent=T2C.MSG.currentLanguage.BUTTON_SAVE_XML})),document.getElementById("load-code-button").addEventListener("click",(function(){document.getElementById("text-code-container").classList.remove("hide-container"),document.getElementById("text-code-container").classList.add("show-container"),document.getElementById("textCodeBox").value="",document.getElementById("xmlData").value="",document.getElementById("load-save-text-code").textContent=T2C.MSG.currentLanguage.BUTTON_LOAD_TEXT_CODE,document.getElementById("load-save-xml").textContent=T2C.MSG.currentLanguage.BUTTON_LOAD_XML})),document.getElementById("load-save-text-code").addEventListener("click",(function(){if(document.getElementById("load-save-text-code").textContent===T2C.MSG.currentLanguage.BUTTON_LOAD_TEXT_CODE){console.log("Parsing",document.getElementById("textCodeBox").value);var e=T2C.MSG.currentLanguage.CONFIRM_CONVERT_TEXT_TO_BLOCKS,t=T2C.MSG&&T2C.MSG.currentLanguage===T2C.MSG.PY?document.getElementById("textCodeBox").value.replace(/[\r\n]+/g,";"):document.getElementById("textCodeBox").value,n=shared.parser.parseBottomUpCYK(t,shared.parseTreeBlockConnector)[0];if(n&&confirm(e)){shared.workspace.clear();var r=shared.evaluator.evaluate(n),o=Object(_block_utility_functions_js__WEBPACK_IMPORTED_MODULE_8__.c)(shared.workspace);o.moveBy(50,50),console.log("Parse Tree:",n),console.log("Evaluation: ",r),console.log(Object(_block_generator_js__WEBPACK_IMPORTED_MODULE_6__.a)(r,o))}else n||alert("There seems to be a problem with the code you entered.  Check that your spelling is correct, that you use lowercase and capital letters as required, that every open parenthesis ( has a matching closed one ), that you use quotation marks as needed, and other potential issues with syntax.")}else{var i=document.getElementById("textCodeBox").value;navigator.clipboard.writeText(i).then((function(){alert("Code successfully copied to clipboard")}),(function(){document.getElementById("textCodeBox").select(),alert("Code unable to be copied to clipboard.  Please do this manually.")}))}})),document.getElementById("load-save-xml").addEventListener("click",(function(){if(document.getElementById("load-save-xml").textContent===T2C.MSG.currentLanguage.BUTTON_LOAD_XML)generateBlocksFromXML();else{var e=document.getElementById("xmlData").value;navigator.clipboard.writeText(e).then((function(){alert("XML successfully copied to clipboard")}),(function(){document.getElementById("xmlData").select(),alert("XML unable to be copied to clipboard.  Please do this manually.")}))}})),document.getElementById("output-container").addEventListener("click",(function(e){"table-cell"===e.target.className&&(document.getElementById("output-container").classList.remove("show-container"),document.getElementById("output-container").classList.add("hide-container"))})),document.getElementById("text-code-container").addEventListener("click",(function(e){"table-cell"===e.target.className&&(document.getElementById("text-code-container").classList.remove("show-container"),document.getElementById("text-code-container").classList.add("hide-container"))}))),document.getElementById("convertXMLToBlocksButton").addEventListener("click",(function(){generateBlocksFromXML()})),document.getElementById("convertTextToBlocksButton").addEventListener("click",(function(){console.log("Parsing",document.getElementById("textCodeBox").value);var e=T2C.MSG.currentLanguage.CONFIRM_CONVERT_TEXT_TO_BLOCKS,t=T2C.MSG&&T2C.MSG.currentLanguage===T2C.MSG.PY?document.getElementById("textCodeBox").value.replace(/[\r\n]+/g,";"):document.getElementById("textCodeBox").value,n=shared.parser.parseBottomUpCYK(t,shared.parseTreeBlockConnector)[0];if(n&&confirm(e)){shared.workspace.clear();var r=shared.evaluator.evaluate(n),o=Object(_block_utility_functions_js__WEBPACK_IMPORTED_MODULE_8__.c)(shared.workspace);o.moveBy(50,50),console.log("Parse Tree:",n),console.log("Evaluation: ",r),console.log(Object(_block_generator_js__WEBPACK_IMPORTED_MODULE_6__.a)(r,o))}else n||alert("There seems to be a problem with the code you entered.  Check that your spelling is correct, that you use lowercase and capital letters as required, that every open parenthesis ( has a matching closed one ), that you use quotation marks as needed, and other potential issues with syntax.")})),document.getElementById("convertToJSButton").addEventListener("click",(function(){var e=shared.workspace||Blockly.getMainWorkspace();e.getAllBlocks().forEach(_block_converters_javascript_text_exact_js__WEBPACK_IMPORTED_MODULE_7__.b),Object(_block_utility_functions_js__WEBPACK_IMPORTED_MODULE_8__.d)(e)}))}}));var e=new _tokenizer_js__WEBPACK_IMPORTED_MODULE_1__.a(_grammar_js__WEBPACK_IMPORTED_MODULE_0__.b);return{lexer:e,parser:new _parser_js__WEBPACK_IMPORTED_MODULE_2__.a(e,_grammar_js__WEBPACK_IMPORTED_MODULE_0__.a,Object.keys(_block_interpretations_js__WEBPACK_IMPORTED_MODULE_4__.a).concat("statement")),parseTreeBlockConnector:new _parse_tree_block_connector_js__WEBPACK_IMPORTED_MODULE_3__.a,evaluator:new _block_evaluator_js__WEBPACK_IMPORTED_MODULE_5__.a(_block_interpretations_js__WEBPACK_IMPORTED_MODULE_4__.a)}},shared=init();function varsToLets(e){var t=e.indexOf("var")+4,n=e.indexOf(";",t),r=[],o=e;return t>3&&(r=e.substring(t,n).split(", "),o=e.substring(0,t-4)+e.substring(n+1)),r.forEach((function(e){o=o.replace("\n"+e+" = ","\nlet "+e+" = ")})),o.trim()}function generateCode(){var e=T2C.MSG.currentLanguage===T2C.MSG.PY?"Python":"JavaScript";Blockly.Python.tempFinish=Blockly.Python.finish,Blockly.Python.finish=function(e){return e};var t=Blockly[e].workspaceToCode(shared.workspace||Blockly.getMainWorkspace());return Blockly.Python.finish=Blockly.Python.tempFinish,"Python"===e?t:varsToLets(t)}function generateXML(){var e=Blockly.Xml.workspaceToDom(shared.workspace);return Blockly.Xml.domToPrettyText(e)}function generateBlocksFromXML(){var e=shared.workspace||Blockly.getMainWorkspace(),t=document.getElementById("xmlData").value,n=null;try{n=Blockly.Xml.textToDom(t)}catch(e){if(!window.confirm(e))return}n&&(e.clear(),Blockly.Xml.domToWorkspace(n,e)),Blockly.svgResize(e)}function runCode(){var code=generateCode();console.realLog=console.log;try{document.getElementById("consoleDisplay").textContent="",console.log=function(){document.getElementById("consoleDisplay").appendChild(document.createTextNode(Array.prototype.join.call(arguments," ")+"\n"))},eval(code)}catch(e){-1!=e.toString().indexOf("Reference")?alert(e.toString()+"\nMake sure variables are defined before they're used.  This means the variable definition let ____ = ____ needs to appear ABOVE."):alert(e.toString())}return console.log=console.realLog,code}function updateToolbox(e){shared.toolbox.querySelectorAll("category").forEach((function(t){t.setAttribute("name",T2C.MSG[e.toUpperCase()][t.dataset.name])})),T2C.MSG.currentLanguage=T2C.MSG[e.toUpperCase()],shared.workspace.updateToolbox(shared.toolbox)}function updateWords(){document.getElementById("changeButtons").querySelectorAll("button").forEach((function(e){e.textContent=T2C.MSG.currentLanguage[e.name]}))}function updateTexts(){(document.getElementById("text-code-container")||document.getElementById("text-code")).querySelectorAll("textarea").forEach((function(e){e.placeholder=T2C.MSG.currentLanguage[e.name]}))}return shared}()},function(e,t,n){t.a=function(){function e(t){_classCallCheck(this,e),this.tokens_=t,this.tokensRegExp_=Object.keys(t).map((function(e){return{key:e,value:RegExp(t[e].pattern),order:t[e].order}})),this.tokensRegExp_.sort((function(e,t){return e.order-t.order}))}return _createClass(e,[{key:"isToken",value:function(e){return!1}},{key:"isTokenType",value:function(e){return-1!==Object.keys(this.tokens_).indexOf(e)}},{key:"tokenize",value:function(e){var t=this;return function e(n){if(""===n.trim())return[];for(var r=void 0,o=0;o<t.tokensRegExp_.length&&!(r=t.tokensRegExp_[o].value.exec(n));)o++;if(r){var i=r instanceof Array?r.slice(1).find((function(e){return null!=e})):null,s=null!=i?i:n.substring(r.index,r.index+r[0].length);return e(n.substring(0,r.index)).concat([{tokenType:t.tokensRegExp_[o].key,value:s}]).concat(e(n.substring(r.index+r[0].length)))}return n.trim().split("").filter((function(e){return-1===e.search(/\s/)})).map((function(e){return Object({tokenType:"none",value:e})}))}(e)}}]),e}()},function(e,t,n){var r=n(1),o=n(2);t.a=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"convertToBlockParseTrees",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e.rhsides.map((function(i){return"string"==typeof i?[new r.a(e.lhs,i)]:Object(o.a)(i.map((function(e){return t.convertToBlockParseTrees(e,n)}))).map((function(t){return new r.a(e.lhs,t)}))})).reduce((function(e,t){return e.concat(t)}),[]).slice(0,n)}}]),e}()},function(e,t,n){var r=n(1),o=n(4);t.a=function(){function e(t){_classCallCheck(this,e),this.interpretations_=t}return _createClass(e,[{key:"evaluate",value:function(e){if(null===e||e instanceof r.a){if(e){var t="string"==typeof e.rhs?[e.rhs.replace(/\"/g,"'")]:e.rhs.map(this.evaluate.bind(this)),n=this.interpretations_[e.lhs];if("string"==typeof n)return n;if(n){var i=new o.a(JSON.stringify(n));return i.args=t,i}return t[0]}return""}throw console.assert(null!==e&&!(e instanceof r.a),{msg:"Non-null is invalid root type",expectedType:r.a,actual:e}),new Error("Invalid root type")}}]),e}()},function(e,t,n){var r=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];_classCallCheck(this,e),this.lhs_=t,this.rhsides_=n}return _createClass(e,[{key:"merge",value:function(e){var t;console.assert(this.lhs_===e.lhs_,{msg:"This lhs of "+this.lhs_+" does not match node's lhs of "+e.lhs_}),(t=this.rhsides_).push.apply(t,_toConsumableArray(e.rhsides_))}},{key:"lhs",get:function(){return this.lhs_}},{key:"rhsides",get:function(){return this.rhsides_}}],[{key:"concatToEach",value:function(t,n,r){return new e(t,n.rhsides_.map((function(e){return e.concat(r)})))}}]),e}(),o=function(){function e(t,n){_classCallCheck(this,e),this.root_=new r(t,[Array.isArray(n)?n.map((function(e){return e.root_})):n])}return _createClass(e,[{key:"rhsConcat",value:function(t,n){var o=new e(t,[]);return o.root_=r.concatToEach(t,this.root_,n.root_),o}},{key:"parseTrees",value:function(e){return e.convertToBlockParseTrees(this.root_)}},{key:"rootLHS",get:function(){return this.root_.lhs}}],[{key:"mergeForests",value:function(e){var t=e.slice();t.sort((function(e,t){return e.root_.lhs===t.root_.lhs?0:e.root_.lhs<t.root_.lhs?-1:1}));for(var n=[],r=0;r<t.length;r++)0===r||n[n.length-1].root_.lhs!==t[r].root_.lhs?n.push(t[r]):n[n.length-1].root_.merge(t[r].root_);return n}}]),e}(),i=n(2);t.a=function(){function e(t,n,r){_classCallCheck(this,e),this.lexer_=t,this.createRuleSetFromGrammar_(n),r=r||[],console.warn("NEW RULE SET:",this.ruleSets_),this.terminals_=n.terminals,this.maxDepth_=0}return _createClass(e,[{key:"addRule_",value:function(e,t,n){if((n=n||this.ruleSets_)[e]){var r=Array.from(n[e]).filter((function(e){return Array.isArray(e)})).map((function(e){return JSON.stringify(e)}));Array.isArray(t)&&-1!==r.indexOf(JSON.stringify(t))||n[e].add(t)}else n[e]=new Set([t])}},{key:"flattenNonessentialUnitRules_",value:function(e){var t=this,n=Object.keys(this.ruleSets_),r=n.filter((function(t){return-1===e.indexOf(t)}));console.warn("Required symbols",e),console.warn("Nonessential",r),r.forEach((function(e,o){console.warn("Current: ",e,o,"out of",r.length,"processed");var s=Array.from(t.ruleSets_[e]).filter((function(e){return Array.isArray(e)&&1===e.length})),a=s.map((function(e){return"string"==typeof e?e:e[0]}));n.forEach((function(n){var r=[],o=[];Array.from(t.ruleSets_[n]).filter((function(e){return Array.isArray(e)})).forEach((function(t){var n=[],s=!1;t.forEach((function(t,r){t!==e?0===r?n.push([t]):n.forEach((function(e){return e.push(t)})):(s=!0,n=0===r?a.map((function(e){return[e]})):Object(i.b)(n,a).map((function(e){return e[0].concat(e[1])})))})),s&&o.push(t),r.push.apply(r,_toConsumableArray(n))})),r.forEach((function(e){return t.addRule_(n,e)})),s.length===t.ruleSets_[e].size&&o.forEach((function(e){if(!t.ruleSets_[n].delete(e))throw new Error(e)}))})),s.forEach((function(n){if(!t.ruleSets_[e].delete(n))throw new Error("No delete")}))}))}},{key:"getTranslations_",value:function(e){return Object.keys(T2C.MSG).map((function(t){return T2C.MSG[t][Object.keys(T2C.MSG[t]).find((function(t){return t==="TERMINAL_"+e.toUpperCase()}))]})).filter((function(e){return void 0!==e}))}},{key:"createRuleSetFromGrammar_",value:function(e){var t=this;this.ruleSets_={},Object.keys(e.rules).forEach((function(n){var r=[n],o=e.rules[n];"string"==typeof o||o instanceof Array?("string"==typeof o&&r.push(o),t.addRule_(n,o)):Object.keys(o).forEach((function(e){t.addRule_(n,[e]),t.addRule_(e,o[e]),r.push(e),"string"==typeof o[e]&&r.push(o[e])})),r.forEach((function(e){return t.getTranslations_(e).forEach((function(e){return t.addRule_(n,e)}))}))}))}},{key:"maxPathLengthToTerminalOrSplit_",value:function(e){var t,n=this,r=(e?[e]:Object.keys(this.ruleSets_)).map((function(e){return n.ruleSets_[e]?Array.from(n.ruleSets_[e]).filter((function(e){return Array.isArray(e)&&1===e.length&&n.ruleSets_[e[0]]})).map((function(t){return[e].concat(n.maxPathLengthToTerminalOrSplit_(t[0]))})):[e]})),o=e?r[0]:(t=[]).concat.apply(t,_toConsumableArray(r));return 0===o.length?[e]:o.reduce((function(e,t){return e.length>t.length?e:t}))}},{key:"getOppositeRules_",value:function(){var e=this,t={};return Object.keys(this.ruleSets_).forEach((function(n){Array.from(e.ruleSets_[n]).forEach((function(r){if(Array.isArray(r))if(1===r.length)e.addRule_(r[0],n,t);else{var o=n;r.slice(0,r.length-1).forEach((function(n,i){var s=r.length-i-1==1?r[0]:JSON.stringify(r.slice(0,r.length-i-1));e.addRule_(JSON.stringify([s,r[r.length-i-1]]),o,t),o=s}))}else e.addRule_(r,n,t)}))})),t}},{key:"getUnitRules_",value:function(e,t,n){for(var r=[],i=e,s=function(e){var n=[];i.forEach((function(e){t[e.rootLHS]&&Array.from(t[e.rootLHS]).filter((function(t){return t!==e.rootLHS})).forEach((function(t){return n.push(new o(t,[e]))}))})),r.push.apply(r,n),i=n},a=0;a<n&&i.length>0;a++)s();return r}},{key:"parseBottomUpCYK",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"statement";if(""===e)return[];Object.values(this.ruleSets_).reduce((function(e,t){return e+t.size}),0);var r=this.lexer_.tokenize(e),s=this.maxPathLengthToTerminalOrSplit_("statement"),a=this.getOppositeRules_();console.warn("TOKEN ARRAY:",r);for(var l=[r.map((function(e){return Array.from(a[e.value]||[]).concat(e.tokenType).filter((function(e,t,n){return n.indexOf(e)===t})).map((function(t){return new o(t,e.value)}))}))],c=0;c<r.length;c++){var u;(u=l[0][c]).push.apply(u,_toConsumableArray(this.getUnitRules_(l[0][c],a,s.length))),l[0][c]=o.mergeForests(l[0][c])}for(var _=1;_<r.length;_++){for(var p=[],g=0;g<r.length-_;g++){for(var d,h=[],T=0;T<_;T++){var f=Object(i.b)(l[T][g],l[_-1-T][g+T+1]);h.push.apply(h,_toConsumableArray(f))}p.push(o.mergeForests(h.map((function(e){return{lhsides:a[JSON.stringify([e[0].rootLHS,e[1].rootLHS])],rhs:e}})).filter((function(e){return void 0!==e.lhsides})).map((function(e){return Array.from(e.lhsides).map((function(t){return e.rhs[0].rootLHS.startsWith("[")?e.rhs[0].rhsConcat(t,e.rhs[1]):new o(t,e.rhs)}))})).reduce((function(e,t){return e.concat(t)}),[]))),(d=p[g]).push.apply(d,_toConsumableArray(this.getUnitRules_(p[g],a,s.length))),p[g]=o.mergeForests(p[g])}l.push(p)}console.warn("LEVELS",l);var m=l[l.length-1][0].find((function(e){return e.rootLHS===n})),E=m?m.parseTrees(t):[];return console.warn("RESULT",E),E}},{key:"matchLanguageToken_",value:function(e,t){return Object.keys(T2C.MSG).map((function(e){return e.toUpperCase()})).some((function(n){return T2C.MSG[n]&&T2C.MSG[n]["TERMINAL_"+e.toUpperCase()]===t.value}))}},{key:"flattenOneLevel_",value:function(e){return e.reduce((function(e,t){return e.concat(t)}),[])}},{key:"joinEachItemToFront_",value:function(e,t){return this.flattenOneLevel_(t.map((function(t){return e.map((function(e){return[e].concat(t)}))})))}},{key:"getRHSOfTokenMatch_",value:function(e,t){var n=this;return-1!==this.lexer_.isTokenType(e)&&t.tokenType===e||-1!==this.terminals_.indexOf(e)&&Array.from(this.ruleSets_[e]).some((function(e){return e===t.value||n.matchLanguageToken_(e,t)}))?t.value:null}},{key:"isTerminal_",value:function(e){return-1!==this.terminals_.indexOf(e)||this.lexer_.isTokenType(e)}},{key:"parseTopDown",value:function(e){var t=this;console.log(this.ruleSets_);var n=Object.values(this.ruleSets_).reduce((function(e,t){return e+t.size}),0),r=this.lexer_.tokenize(e),o=new Memoizer,i=this.maxPathLengthToTerminalOrSplit_("statement");console.log("ARRAY:",i,i.length,n);console.log("Token Array:",r);var s=o.compute((function e(n,s,a,l){if(0===l||n instanceof Array&&0===n.length||n instanceof Array&&n.length>a-s+1)return[];if("string"==typeof n&&t.isTerminal_(n)){if(s!==a)return[];var c=t.getRHSOfTokenMatch_(n,r[s]);return c?[{lhs:n,rhs:[c]}]:[]}if("string"==typeof n)return t.flattenOneLevel_(Array.from(t.ruleSets_[n]).map((function(t){var r=o.compute(e,[t,s,a,l-1],0);return r.some((function(e){return e.length!==t.length}))?(console.log("throwing out",n,JSON.stringify(r),t),console.log("problem",t,r,r.find((function(e){return e.length!==t.length}))),null):r.map((function(e){return{lhs:n,rhs:e}}))})).filter((function(e){return e})));if(n instanceof Array&&1===n.length){var u=o.compute(e,[n[0],s,a,l]);return u.length>0?u.map((function(e){return[e]})):[]}for(var _=[],p=s;p<a;p++){var g=o.compute(e,[n[0],s,p,i.length]);if(g.length>0){var d=o.compute(e,[n.slice(1),p+1,a,i.length]);d.length>0&&_.push.apply(_,_toConsumableArray(t.joinEachItemToFront_(g,d)))}}return _}),["statement",0,r.length-1,i.length]);return o.clear(),s}}]),e}()},function(e,t){
/**
   * @license
   * Visual Blocks Editor
   *
   * Copyright 2012 Google Inc.
   * https://developers.google.com/blockly/
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */
Blockly.Blocks.math_arithmetic_basic={init:function(){this.jsonInit({message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[[Blockly.Msg.MATH_ADDITION_SYMBOL,"ADD"],[Blockly.Msg.MATH_SUBTRACTION_SYMBOL,"MINUS"],[Blockly.Msg.MATH_MULTIPLICATION_SYMBOL,"MULTIPLY"],[Blockly.Msg.MATH_DIVISION_SYMBOL,"DIVIDE"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",colour:Blockly.Msg.MATH_HUE,helpUrl:Blockly.Msg.MATH_ARITHMETIC_HELPURL});var e=this;this.setTooltip((function(){var t=e.getFieldValue("OP");return{ADD:Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_ADD,MINUS:Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS,MULTIPLY:Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY,DIVIDE:Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE}[t]}))}},Blockly.Blocks.math_change=null},function(e,t){
/**
   * @license
   * Visual Blocks Editor
   *
   * Copyright 2012 Google Inc.
   * https://developers.google.com/blockly/
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */
Blockly.Blocks.text_print={init:function(){this.jsonInit({message0:T2C.MSG.currentLanguage.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,colour:Blockly.Msg.TEXTS_HUE,tooltip:T2C.MSG.currentLanguage.TEXT_PRINT_TOOLTIP,helpUrl:Blockly.Msg.TEXT_PRINT_HELPURL})}},Blockly.Blocks.js_text_print={init:function(){this.jsonInit({message0:"console.log(%1);",args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,colour:Blockly.Msg.TEXTS_HUE,tooltip:T2C.MSG.currentLanguage.TEXT_PRINT_TOOLTIP,helpUrl:Blockly.Msg.TEXT_PRINT_HELPURL})}},Blockly.Blocks.text_input={init:function(){this.jsonInit({message0:T2C.MSG.currentLanguage.TEXT_INPUT_TITLE,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",colour:Blockly.Msg.TEXTS_HUE,tooltip:T2C.MSG.currentLanguage.TEXT_PROMPT_TOOLTIP_TEXT,helpUrl:Blockly.Msg.TEXT_PROMPT_HELPURL})}},Blockly.Blocks.js_text_input={init:function(){this.jsonInit({message0:"prompt(%1)",args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",colour:Blockly.Msg.TEXTS_HUE,tooltip:T2C.MSG.currentLanguage.TEXT_PROMPT_TOOLTIP_TEXT,helpUrl:Blockly.Msg.TEXT_PROMPT_HELPURL})}},Blockly.Blocks.t2c_text_join={init:function(){this.jsonInit({message0:"%1 + %2",args0:[{type:"input_value",name:"A",check:"String"},{type:"input_value",name:"B",check:"String"}],inputsInline:!0,output:"String",colour:Blockly.Msg.TEXTS_HUE,tooltip:T2C.MSG.currentLanguage.TEXT_PLUS_TOOLTIP_TEXT,helpUrl:""})}},Blockly.Blocks.t2c_text_length={init:function(){this.jsonInit({message0:T2C.MSG.currentLanguage.TEXT_T2C_LENGTH_TITLE,args0:[{type:"input_value",name:"VALUE",check:"String"}],inputsInline:!0,output:"Number",colour:Blockly.Msg.TEXTS_HUE,tooltip:T2C.MSG.currentLanguage.TEXT_T2C_LENGTH_TOOLTIP,helpUrl:""})}},Blockly.Blocks.t2c_text_indexof={init:function(){this.jsonInit({message0:T2C.MSG.currentLanguage.TEXT_T2C_INDEXOF_TITLE,args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"input_value",name:"FIND",check:"String"}],inputsInline:!0,output:"Number",colour:Blockly.Msg.TEXTS_HUE,tooltip:T2C.MSG.currentLanguage.TEXT_T2C_INDEXOF_TOOLTIP,helpUrl:""})}},Blockly.Blocks.js_text_indexof={init:function(){this.appendValueInput("VALUE").setCheck("String"),this.appendValueInput("FIND").setCheck("String").appendField(".indexOf("),this.appendDummyInput().appendField(")"),this.setInputsInline(!0),this.setOutput(!0,"Number"),this.setColour(Blockly.Msg.TEXTS_HUE),this.setTooltip(T2C.MSG.currentLanguage.TEXT_T2C_INDEXOF_TOOLTIP.replace("%1",0)),this.setHelpUrl(Blockly.Msg.TEXT_INDEXOF_HELPURL)}},Blockly.Blocks.t2c_text_charat={init:function(){this.jsonInit({message0:T2C.MSG.currentLanguage.TEXT_T2C_CHARAT_TITLE,args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"input_value",name:"AT",check:"Number"}],inputsInline:!0,output:"String",colour:Blockly.Msg.TEXTS_HUE,tooltip:T2C.MSG.currentLanguage.TEXT_CHARAT_FROM_START_TOOLTIP,helpUrl:Blockly.Msg.TEXT_CHARAT_HELPURL})}},Blockly.Blocks.t2c_text_getsubstring={init:function(){this.jsonInit({message0:T2C.MSG.currentLanguage.TEXT_T2C_GET_SUBSTRING_TITLE,args0:[{type:"input_value",name:"STRING",check:"String"},{type:"input_value",name:"AT1",check:"Number"},{type:"input_value",name:"AT2",check:"Number"}],inputsInline:!0,output:"String",colour:Blockly.Msg.TEXTS_HUE,tooltip:T2C.MSG.currentLanguage.TEXT_T2C_GET_SUBSTRING_TOOLTIP,helpUrl:Blockly.Msg.TEXT_GET_SUBSTRING_HELPURL})}},Blockly.Blocks.t2c_text_after={init:function(){this.appendValueInput("TEXT").setCheck("String"),this.appendValueInput("SUB").setCheck("String").appendField(".getAfterTEXT("),this.appendDummyInput().appendField(")"),this.setInputsInline(!0),this.setOutput(!0,"String"),this.setColour(Blockly.Msg.TEXTS_HUE),this.setTooltip("returns all text appearing after second text in the first text"),this.setHelpUrl("")}},Blockly.Blocks.t2c_text_before={init:function(){this.appendValueInput("TEXT").setCheck("String"),this.appendValueInput("SUB").setCheck("String").appendField(".getBeforeTEXT("),this.appendDummyInput().appendField(")"),this.setInputsInline(!0),this.setOutput(!0,"String"),this.setColour(Blockly.Msg.TEXTS_HUE),this.setTooltip("returns all text appearing before second text in the first text"),this.setHelpUrl("")}},Blockly.Blocks.js_text_charat={init:function(){this.appendValueInput("VALUE").setCheck("String"),this.appendValueInput("AT").setCheck("Number").appendField(".charAt("),this.appendDummyInput().appendField(")"),this.setInputsInline(!0),this.setOutput(!0,"String"),this.setColour(Blockly.Msg.TEXTS_HUE),this.setTooltip(T2C.MSG.currentLanguage.TEXT_CHARAT_FROM_START_TOOLTIP),this.setHelpUrl(Blockly.Msg.TEXT_CHARAT_HELPURL)}},Blockly.Blocks.js_text_getsubstring={init:function(){this.appendValueInput("STRING").setCheck("String"),this.appendValueInput("AT1").setCheck("Number").appendField(".substring("),this.appendValueInput("AT2").setCheck("Number").appendField(", "),this.appendDummyInput().appendField(")"),this.setInputsInline(!0),this.setOutput(!0,"String"),this.setColour(Blockly.Msg.TEXTS_HUE),this.setTooltip(T2C.MSG.currentLanguage.TEXT_T2C_GET_SUBSTRING_TOOLTIP),this.setHelpUrl(Blockly.Msg.TEXT_GET_SUBSTRING_HELPURL)}}},,,,,,function(e,t,n){n.r(t),n(13),n(14);var r=n(8);!function(){function e(t,n){var r=void 0;return t.length?n.length?(r=t.match(/^%\d+/))?n.charAt(0)+(e(t.substring(r[0].length),n.substring(1))||e(t,n.substring(1))):n.charAt(0)===t.charAt(0)?n.charAt(0)+e(t.substring(1),n.substring(1)):null:t.replace(/%\d+/g,""):""}Blockly.Blocks.code_expression={init:function(){var e={editing:!1};this.appendDummyInput("STRING").appendField(T2C.MSG.currentLanguage.TYPEIN_EXPRESSION_TITLE).appendField(new Blockly.FieldMultilineInput("",(function(t){t&&(e.editing=!0)})),"EXP"),this.setInputsInline(!0),this.setOutput(!0),this.setColour(60),this.setTooltip(T2C.MSG.currentLanguage.TYPEIN_EXPRESSION_TOOLTIP),this.onchange=r.parseAndConvertToBlocks.bind(this,e)}},Blockly.Blocks.code_statement={init:function(){var t=this,n=[["Autocomplete Options","None"],[T2C.MSG.currentLanguage.TEXT_PRINT_TITLE,"text_print"],[T2C.MSG.currentLanguage.TEXT_INPUT_TITLE,"text_input"],[T2C.MSG.currentLanguage.TEXT_T2C_LENGTH_TITLE,"t2c_text_length"],[T2C.MSG.currentLanguage.TEXT_T2C_INDEXOF_TITLE,"t2c_text_indexof"],[T2C.MSG.currentLanguage.TEXT_T2C_CHARAT_TITLE,"t2c_text_charat"],[T2C.MSG.currentLanguage.TEXT_T2C_GET_SUBSTRING_TITLE,"t2c_text_getsubstring"]],o=n.slice(),i={editing:!1,shownOPTIONS:o,candidateBlockArr:[{text:/di[^\s()]*/,type:"text_print"},{text:/getIn[^\s()]*/,type:"text_input"}]};this.appendDummyInput("FILLER").appendField(T2C.MSG.currentLanguage.TYPEIN_STATEMENT_TITLE).appendField(new Blockly.FieldDropdown(o),"AUTOCPLT"),this.appendDummyInput("STRING").appendField(new Blockly.FieldMultilineInput("",(function(r){if(r){var s=n.slice(1).map((function(n){return[e(n[0],t.getFieldValue("EXP")),n[1]]})).filter((function(e){return e[0]}));!function(e,t){for(;e.length>0;)e.pop();e.push.apply(e,_toConsumableArray(t))}(o,[n[0]].concat(s)),console.warn(t.getFieldValue("EXP"),o),i.editing=!0}})),"EXP"),this.setInputsInline(!1),this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setColour(60),this.setTooltip(T2C.MSG.currentLanguage.TYPEIN_STATEMENT_TOOLTIP),this.onchange=r.parseAndConvertToBlocks.bind(this,i)}}}()}]);